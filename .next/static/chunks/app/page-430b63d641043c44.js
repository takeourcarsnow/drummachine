(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{58:function(e,t,a){Promise.resolve().then(a.bind(a,3426))},3426:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var s=a(7437),l=a(2265),n=a(3851);function Transport(){let{state:e,updateState:t}=(0,n.useApp)();return(0,s.jsxs)("div",{className:"row panel",children:[(0,s.jsx)("div",{className:"title",children:"Transport & Groove"}),(0,s.jsxs)("div",{className:"controls",children:[(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"▶ Play"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Tap"}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"bpm",children:"BPM"}),(0,s.jsx)("input",{type:"range",id:"bpm",min:"40",max:"240",value:e.bpm,onChange:e=>{let a=parseFloat(e.target.value);t({bpm:a})}}),(0,s.jsx)("input",{type:"number",id:"bpmNum",min:"40",max:"240",value:e.bpm,onChange:e=>{let a=parseFloat(e.target.value);t({bpm:a})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"swing",children:"Swing"}),(0,s.jsx)("input",{type:"range",id:"swing",min:"0",max:"0.6",step:"0.01",value:e.swingAmt,onChange:e=>{let a=parseFloat(e.target.value);t({swingAmt:a})}}),(0,s.jsxs)("span",{className:"tiny",children:[Math.round(100*e.swingAmt),"%"]})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"human",children:"Humanize"}),(0,s.jsx)("input",{type:"range",id:"human",min:"0",max:"30",step:"1",value:e.humanizeMs,onChange:e=>{let a=parseFloat(e.target.value);t({humanizeMs:a})}}),(0,s.jsxs)("span",{className:"tiny",children:[Math.round(e.humanizeMs),"ms"]})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{children:"Tools"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Randomize"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Clear"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Save"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Load"}),(0,s.jsx)("button",{className:"btn",onClick:()=>{},children:"Share"})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{children:"Scale"}),(0,s.jsx)("span",{className:"badge",children:"16 Steps • 4 Tracks"}),(0,s.jsx)("span",{className:"inline-note",children:"Alt-click pad = accent"})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"masterVol",children:"Master"}),(0,s.jsx)("input",{type:"range",id:"masterVol",min:"0",max:"1",step:"0.01",value:e.master,onChange:e=>{let a=parseFloat(e.target.value);t({master:a})}})]})]})]})}var r=a(9813);function DrumGrid(){let{state:e,updateState:t,toggleCell:a,setCell:i,toggleMute:c,toggleSolo:o}=(0,n.useApp)();return(0,s.jsxs)("div",{className:"row panel",children:[(0,s.jsx)("div",{className:"title",children:"Drum Machine"}),(0,s.jsxs)("div",{className:"grid grid-head",children:[(0,s.jsx)("div",{className:"track-name tiny",children:"STEP"}),Array.from({length:r.q},(e,t)=>(0,s.jsx)("div",{className:"step-head ".concat(t%2==0?"even":""),children:t+1},t))]}),(0,s.jsx)("div",{className:"grid",children:r.j.map((t,n)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)("div",{className:"track-name",children:[(0,s.jsx)("span",{children:t.name}),(0,s.jsxs)("span",{className:"ms",children:[(0,s.jsx)("button",{className:"toggle m ".concat(e.trackState[n].mute?"active":""),onClick:()=>c(n),title:"Mute",children:"M"}),(0,s.jsx)("button",{className:"toggle s ".concat(e.trackState[n].solo?"active":""),onClick:()=>o(n),title:"Solo",children:"S"})]})]}),Array.from({length:r.q},(t,l)=>{let r=e.pattern[n][l];return(0,s.jsx)("div",{className:"cell ".concat(l%2==0?"even":""," ").concat(r>0?"active":""," ").concat(2===r?"accent":""),onClick:e=>{if(e.altKey){let e=2===r?1:2;i(n,l,e)}else a(n,l)}},l)})]},n))}),(0,s.jsxs)("div",{className:"vol-row",children:[(0,s.jsx)("span",{className:"tiny",children:"Track Volumes:"}),r.j.map((a,n)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("span",{className:"tiny",style:{color:"var(--fg)",width:"64px",display:"inline-block"},children:a.name}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.volumes[n],onChange:a=>{let s=[...e.volumes];s[n]=parseFloat(a.target.value),t({volumes:s})},"aria-label":"".concat(a.name," Volume")})]},n))]}),(0,s.jsx)("div",{className:"help",children:"Tips: Click pads to toggle. Alt/Option adds Accent. Drag to paint. Yellow frame shows the playing step. Randomize for instant fun. Use M/S to Mute or Solo tracks."})]})}function SynthControls(){let{state:e,updateState:t}=(0,n.useApp)();return(0,s.jsxs)("div",{style:{minWidth:"300px",flex:1},children:[(0,s.jsx)("div",{className:"title",children:"Chippy Synth"}),(0,s.jsxs)("div",{className:"controls",style:{gap:"12px"},children:[(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"waveSel",children:"Wave"}),(0,s.jsxs)("select",{id:"waveSel",value:e.synth.wave,onChange:a=>{t({synth:{...e.synth,wave:a.target.value}})},children:[(0,s.jsx)("option",{value:"square",children:"Square 50%"}),(0,s.jsx)("option",{value:"pulse25",children:"Pulse 25%"}),(0,s.jsx)("option",{value:"pulse125",children:"Pulse 12.5%"}),(0,s.jsx)("option",{value:"triangle",children:"Triangle"})]})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"att",children:"Attack"}),(0,s.jsx)("input",{type:"range",id:"att",min:"0",max:"0.5",step:"0.005",value:e.synth.attack,onChange:a=>{t({synth:{...e.synth,attack:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"dec",children:"Decay"}),(0,s.jsx)("input",{type:"range",id:"dec",min:"0",max:"1.5",step:"0.01",value:e.synth.decay,onChange:a=>{t({synth:{...e.synth,decay:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"sus",children:"Sustain"}),(0,s.jsx)("input",{type:"range",id:"sus",min:"0",max:"1.0",step:"0.01",value:e.synth.sustain,onChange:a=>{t({synth:{...e.synth,sustain:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"rel",children:"Release"}),(0,s.jsx)("input",{type:"range",id:"rel",min:"0",max:"2.0",step:"0.01",value:e.synth.release,onChange:a=>{t({synth:{...e.synth,release:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"glide",children:"Glide"}),(0,s.jsx)("input",{type:"range",id:"glide",min:"0",max:"0.2",step:"0.005",value:e.synth.glide,onChange:a=>{t({synth:{...e.synth,glide:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"bits",children:"Bits"}),(0,s.jsx)("input",{type:"range",id:"bits",min:"4",max:"16",step:"1",value:e.synth.bits,onChange:a=>{t({synth:{...e.synth,bits:parseInt(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"cut",children:"Cutoff"}),(0,s.jsx)("input",{type:"range",id:"cut",min:"200",max:"12000",step:"1",value:e.synth.cutoff,onChange:a=>{t({synth:{...e.synth,cutoff:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"reso",children:"Reso"}),(0,s.jsx)("input",{type:"range",id:"reso",min:"0.1",max:"12",step:"0.1",value:e.synth.reso,onChange:a=>{t({synth:{...e.synth,reso:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"vibRate",children:"Vib Hz"}),(0,s.jsx)("input",{type:"range",id:"vibRate",min:"0",max:"12",step:"0.1",value:e.synth.vibRate,onChange:a=>{t({synth:{...e.synth,vibRate:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"vibDepth",children:"Vib Cents"}),(0,s.jsx)("input",{type:"range",id:"vibDepth",min:"0",max:"80",step:"1",value:e.synth.vibDepth,onChange:a=>{t({synth:{...e.synth,vibDepth:parseFloat(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"oct",children:"Oct"}),(0,s.jsx)("input",{type:"number",id:"oct",min:"-2",max:"3",value:e.synth.octave,onChange:a=>{t({synth:{...e.synth,octave:parseInt(a.target.value)}})}})]}),(0,s.jsxs)("div",{className:"ctrl",children:[(0,s.jsx)("label",{htmlFor:"synthVol",children:"Vol"}),(0,s.jsx)("input",{type:"range",id:"synthVol",min:"0",max:"1",step:"0.01",value:e.synth.vol,onChange:a=>{t({synth:{...e.synth,vol:parseFloat(a.target.value)}})}})]})]}),(0,s.jsx)("div",{className:"help",children:"Keyboard: Z S X D C V G B H N J M , (C–C) and Q 2 W 3 E R 5 T 6 Y 7 U I (upper octave). Hold keys for glide."})]})}function Keyboard(){return(0,s.jsxs)("div",{style:{flex:1,minWidth:"320px"},children:[(0,s.jsx)("div",{className:"title",children:"Keys"}),(0,s.jsx)("div",{className:"keyboard",children:(0,s.jsxs)("div",{className:"kb-wrap",style:{width:"".concat(316,"px")},children:[[0,2,4,5,7,9,11].map((e,t)=>(0,s.jsx)("div",{className:"key kb-note","data-note":e.toString(),style:{left:"".concat(46*t,"px"),top:"8px",width:"40px",height:"140px"}},e)),[{semi:1,pos:0,offset:30},{semi:3,pos:1,offset:30},{semi:6,pos:3,offset:30},{semi:8,pos:4,offset:30},{semi:10,pos:5,offset:30}].map(e=>{let{semi:t,pos:a,offset:l}=e;return(0,s.jsx)("div",{className:"key black kb-note","data-note":t.toString(),style:{left:"".concat(46*a+l,"px"),top:"8px",width:"28px",height:"92px"}},t)})]})})]})}function Legend(){return(0,s.jsxs)("div",{className:"row panel",children:[(0,s.jsx)("div",{className:"title",children:"Legend"}),(0,s.jsxs)("div",{className:"help",children:["• Space: Play/Stop • Click pads to toggle • Alt-click for Accent • Drag to paint • Keyboard for synth: ZSXDCVGBHNJ,M for lower, Q2W3ER5T6Y7UI for upper",(0,s.jsx)("br",{}),"• Wave: Square/Pulse/Triangle • Bits: 4–16 bit waveshaper for crunch • Glide: portamento • ADSR + low-pass filter + optional vibrato",(0,s.jsx)("br",{}),"• Tools: Randomize, Clear, Save to local storage, Load, Share (copies URL) • All audio runs in-browser via WebAudio; no assets needed."]})]})}function Home(){let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let initAudio=()=>{t(!0)};return window.addEventListener("pointerdown",initAudio,{once:!0}),()=>window.removeEventListener("pointerdown",initAudio)},[]),(0,s.jsxs)("div",{className:"wrap",children:[(0,s.jsx)("div",{className:"ascii","aria-hidden":"true",children:(0,s.jsx)("pre",{children:"   8-bit chiptune drum machine + mono synth • NES/ASCII vibe\n   Space: Play/Stop • Z/S/X/D/C... = Keys • Click pads to toggle (Alt=Accent)"})}),(0,s.jsx)(Transport,{}),(0,s.jsx)(DrumGrid,{}),(0,s.jsxs)("div",{className:"row panel",style:{gap:"24px"},children:[(0,s.jsx)(SynthControls,{}),(0,s.jsx)(Keyboard,{})]}),(0,s.jsx)(Legend,{}),(0,s.jsx)("div",{className:"footer",children:"CHIP-TRAX • 8-bit drum machine + synth • made with WebAudio"}),(0,s.jsx)("div",{id:"toast",className:"toast",role:"status","aria-live":"polite"})]})}},3851:function(e,t,a){"use strict";a.r(t),a.d(t,{AppProvider:function(){return AppProvider},useApp:function(){return useApp}});var s=a(7437),l=a(2265),n=a(9813);let r={v:2,bpm:120,swingAmt:0,humanizeMs:0,pattern:Array(n.j.length).fill(null).map(()=>Array(n.q).fill(0)),volumes:[.9,.8,.65,.7],trackState:n.j.map(()=>({mute:!1,solo:!1})),synth:{wave:"square",attack:.01,decay:.15,sustain:.6,release:.2,glide:.02,bits:8,cutoff:8e3,reso:.7,vibRate:0,vibDepth:0,octave:0,vol:.75},master:.9},i=(0,l.createContext)(null);function AppProvider(e){let{children:t}=e,[a,c]=(0,l.useState)(r),o=(0,l.useCallback)(e=>{c(t=>({...t,...e}))},[]),d=(0,l.useCallback)((e,t)=>{c(a=>{let s=a.pattern.map((a,s)=>s===e?a.map((e,a)=>a===t?e>0?0:1:e):a);return{...a,pattern:s}})},[]),h=(0,l.useCallback)((e,t,a)=>{c(s=>{let l=s.pattern.map((s,l)=>l===e?s.map((e,s)=>s===t?a:e):s);return{...s,pattern:l}})},[]),p=(0,l.useCallback)(e=>{c(t=>{let a=t.trackState.map((t,a)=>a===e?{...t,mute:!t.mute}:t);return{...t,trackState:a}})},[]),u=(0,l.useCallback)(e=>{c(t=>{let a=t.trackState.map((t,a)=>a===e?{...t,solo:!t.solo}:t);return{...t,trackState:a}})},[]),m=(0,l.useCallback)(()=>{c(e=>{let t=e.pattern.map(e=>e.map(()=>Math.random()>.7?Math.random()>.5?1:2:0));return{...e,pattern:t}})},[]),x=(0,l.useCallback)(()=>{c(e=>({...e,pattern:Array(n.j.length).fill(null).map(()=>Array(n.q).fill(0))}))},[]);return(0,s.jsx)(i.Provider,{value:{state:a,updateState:o,toggleCell:d,setCell:h,toggleMute:p,toggleSolo:u,randomize:m,clear:x},children:t})}function useApp(){let e=(0,l.useContext)(i);if(!e)throw Error("useApp must be used within AppProvider");return e}},9813:function(e,t,a){"use strict";a.d(t,{j:function(){return l},q:function(){return s}});let s=16,l=[{name:"KICK",color:"#62ff9b"},{name:"SNARE",color:"#ff2e8b"},{name:"HAT",color:"#00e0ff"},{name:"CLAP",color:"#ffd166"}]},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=a(2265),l=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var s,c={},o=null,d=null;for(s in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,s)&&!i.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:l,type:e,key:o,ref:d,props:c,_owner:r.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=58)}),_N_E=e.O()}]);